<html>

    <head>
        <title>ninja-cat famicom cartridges</title>
    </head>

    <body>
        <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
           
            var groups = {}
 
            function create_groups(data){
               var groups = {};
                $.each(data, function(cart_id, value){
                    var group = value['group'];
                    if (!(group in groups)){
                        groups[group] = [];
                    }; 
                    groups[group].push(cart_id);
                });
                return groups;
             }


            function create_group_checkboxes(groups){
                inputs = $("ul#fami_tags");
                inputs.empty();
                $.each(groups, function(group, value){
                    listItem = document.createElement("li");
                    labelItem = document.createElement("label");
                    inputItem = document.createElement("input");
                    labeltext = document.createTextNode(group + ' ('+ value.length + ');');
                    inputItem.type = "checkbox";
                    inputItem.name = group;
                    inputItem.value = group;
                    labelItem.appendChild(inputItem);
                    labelItem.appendChild(labeltext);
                    listItem.appendChild(labelItem); 
                    inputs.append(listItem);
                });
            }

            function load_cart_db(){
                $.getJSON('cart.js', function(data){
                    groups = create_groups(data);
                    create_group_checkboxes(groups);  
                });
            }

            load_cart_db();
        
        </script>

        <div>
            <ul id="fami_tags">
                <li> <input type="checkbox" name="transport" value="all" checked="checked" /> all:</li>
                <li> <input type="checkbox" name="transport" value="train" /> konami </li>
                <li> <input type="checkbox" name="transport" value="car" /> capcom </li>
                <li> <input type="checkbox" name="transport" value="bus" /> nintendo </li>
            </ul>
        </div>

        <hr>

        <table border="0">
            <tr>
                <td style="vertical-align: top;">
                    <div id="cart_list" >
                        <select name="carts" size="33" multiple="multiple">
                            <option selected="selected">Robocop 3</option>
                            <option>Jurassic Park</option>
                            <option>Ninja Gaiden 3 Secret of Sacred Stone</option>
                            <option>Contra</option>
                        </select>
                    </div>
                </td>
                <td style="vertical-align: top;">
                    <div id="shock_content" style="overflow:auto;">
                        <ul>
                            <li>title: Contra</li>
                            <li>publisher: konami</li>
                            <li>catalog number: rc826</li>
                            <li> <img src=""></li>
                        </ul>
                    </div>
                </td>
          </tr>
        </table>

    </body>
</html>
